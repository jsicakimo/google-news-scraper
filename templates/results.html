<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ“·å–çµæœ - {{ keyword }}</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    />
    <style>
      body {
        background-color: #f5f5f5;
      }
      .header-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px 0;
        margin-bottom: 30px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .chart-container {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        margin: 30px 0;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .chart-container img {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 20px auto;
      }
      .table-container {
        background-color: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
      }
      .btn-action {
        padding: 10px 25px;
        font-weight: bold;
        border-radius: 8px;
      }
      .stats-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: bold;
      }
      .filter-section {
        background-color: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      /* ğŸ”§ æ–°å¢ï¼šæ’é™¤è¡Œçš„æ¨£å¼ */
      tr.excluded {
        text-decoration: line-through;
        background-color: #f8f9fa !important;
        color: #6c757d;
      }
    </style>
  </head>
  <body>
    <div class="header-section">
      <div class="container">
        <h3 class="mb-2">ğŸ” é—œéµå­—ï¼šã€Œ{{ keyword }}ã€</h3>
        <p class="mb-0 lead">
          å…±æ“·å–åˆ° <span class="stats-badge">{{ count }}</span> ç­†æ–°èã€‚
        </p>
      </div>
    </div>

    <div class="container pb-5">
      <!-- æŒ‰éˆ•å€ -->
      <div class="mb-4">
        <a
          class="btn btn-success btn-action me-2"
          href="/download/{{ file_name }}"
        >
          ğŸ“ ä¸‹è¼‰ Excel
        </a>
        <!-- ğŸ”§ æ–°å¢ï¼šæ¸…é™¤ç¯©é¸æŒ‰éˆ• -->
        <a id="reset-filters-btn"
          class="btn btn-warning btn-action me-2" style="display: none;">
          ğŸ”„ æ¸…é™¤ç¯©é¸
        </a>
        <a class="btn btn-secondary btn-action" href="/"> â†© å›é¦–é  </a>
      </div>

      <!-- æ–°èä¾†æºç¯©é¸å™¨ -->
      <div class="filter-section">
        <h5 class="mb-3">ğŸ” æ–°èä¾†æºç¯©é¸</h5>
        <div class="row">
          {% for source in sources %}
          <div class="col-md-3 mb-2">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                value="{{ source }}"
                id="source-{{ loop.index }}"
                checked
              />
              <label class="form-check-label" for="source-{{ loop.index }}">
                {{ source }}
              </label>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>

      <!-- æ–°èåˆ—è¡¨ï¼ˆæ”¾åœ¨ä¸Šæ–¹ï¼‰ -->
      <div class="table-container">
        <h5 class="mb-4">ğŸ—ï¸ æ–°èåˆ—è¡¨</h5>
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th style="width: 45%">æ¨™é¡Œ</th>
                <th style="width: 15%">ä¾†æº</th>
                <th style="width: 20%">ç™¼å¸ƒæ™‚é–“</th>
                <th style="width: 15%">æƒ…æ„Ÿåˆ†æ</th>
                <th style="width: 5%">æ“ä½œ</th>
              </tr>
            </thead>
            <tbody>
              {% for item in results %}
              <tr data-source="{{ item['ä¾†æº'] }}" data-id="{{ loop.index0 }}">
                <td>
                  <a
                    href="{{ item['é€£çµ'] }}"
                    target="_blank"
                    class="text-decoration-none"
                  >
                    {{ item['æ¨™é¡Œ'] }}
                  </a>
                </td>
                <td>{{ item['ä¾†æº'] }}</td>
                <td>{{ item['ç™¼å¸ƒæ™‚é–“'] }}</td>
                <td>
                  {% if item.get('æƒ…æ„Ÿåˆ†é¡') %} {% if item['æƒ…æ„Ÿåˆ†é¡'] == 'æ­£é¢'
                  %}
                  <span class="badge bg-success">ğŸ˜Š æ­£é¢</span>
                  {% elif item['æƒ…æ„Ÿåˆ†é¡'] == 'è² é¢' %}
                  <span class="badge bg-danger">ğŸ˜ è² é¢</span>
                  {% elif item['æƒ…æ„Ÿåˆ†é¡'] == 'ä¸­ç«‹' %}
                  <span class="badge bg-warning">ğŸ˜ ä¸­ç«‹</span>
                  {% else %}
                  <span class="badge bg-secondary">â“ æœªçŸ¥</span>
                  {% endif %} {% endif %}
                </td>
                <td>
                  <button class="btn btn-sm btn-outline-secondary toggle-exclude" title="å¾åˆ†æä¸­æ’é™¤/æ¢å¾©">
                    ğŸ‘ï¸
                  </button>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <!-- è¦–è¦ºåŒ–åœ–è¡¨å€å¡Š -->
      <div class="row">
        <!-- æƒ…æ„Ÿåˆ†æåœ–è¡¨ -->
        {% if sentiment_chart_data %}
        <div class="col-lg-6 mb-4">
          <div class="chart-container h-100">
            <h5 class="text-center mb-4">ğŸ’­ æ–°èæƒ…æ„Ÿåˆ†æåˆ†ä½ˆ</h5>
            <canvas id="sentimentBarChart"></canvas>
            {% if sentiment_stats %}
            <div class="row mt-3">
              {% for sentiment, count in sentiment_stats.items() %}
              <div class="col-4 text-center">
                {% if sentiment == 'æ­£é¢' %}
                <div class="alert alert-success p-2 mb-0">
                  <strong>ğŸ˜Š æ­£é¢</strong><br /><span style="font-size: 1.2em">{{ count }}</span> ç¯‡
                </div>
                {% elif sentiment == 'è² é¢' %}
                <div class="alert alert-danger p-2 mb-0">
                  <strong>ğŸ˜ è² é¢</strong><br /><span style="font-size: 1.2em">{{ count }}</span> ç¯‡
                </div>
                {% elif sentiment == 'ä¸­ç«‹' %}
                <div class="alert alert-warning p-2 mb-0">
                  <strong>ğŸ˜ ä¸­ç«‹</strong><br /><span style="font-size: 1.2em">{{ count }}</span> ç¯‡
                </div>
                {% endif %}
              </div>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </div>
        {% endif %}

        <!-- åœ“é¤…åœ–çµ±è¨ˆ -->
        {% if pie_chart_data %}
        <div class="col-lg-6 mb-4">
          <div class="chart-container h-100">
            <h5 class="text-center mb-4">ğŸ“Š å„æ–°èä¾†æºç¯‡æ•¸çµ±è¨ˆ</h5>
            <!-- ğŸ”§ ä¿®æ”¹ï¼šä½¿ç”¨ canvas å…ƒç´ å–ä»£ img -->
            <canvas id="pieChart"></canvas>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- è¶¨å‹¢åœ–èˆ‡é—œéµå­—é›²å€å¡Š -->
      <div class="row">
        <!-- æ™‚é–“è¶¨å‹¢åœ– -->
        {% if trend_chart_data %}
        <div class="col-lg-6 mb-4">
          <div class="chart-container h-100">
            <h5 class="text-center mb-4">ğŸ“ˆ æ–°èæ•¸é‡æ™‚é–“è¶¨å‹¢</h5>
            <!-- ğŸ”§ ä¿®æ”¹ï¼šä½¿ç”¨ canvas å…ƒç´ å–ä»£ img -->
            <canvas id="trendLineChart"></canvas>
          </div>
        </div>
        {% endif %}

        <!-- é—œéµå­—é›² -->
        {% if wordcloud %}
        <div class="col-lg-6 mb-4">
          <div class="chart-container h-100">
            <h5 class="text-center mb-4">â˜ï¸ é—œéµå­—é›²</h5>
            <img
              src="{{ url_for('static', filename=wordcloud) }}"
              class="img-fluid"
              alt="é—œéµå­—é›²"
              onerror="this.style.display='none'; this.parentElement.innerHTML+='<p class=text-danger text-center>åœ–è¡¨è¼‰å…¥å¤±æ•—</p>'"
            />
          </div>
        </div>
        {% endif %}
      </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ğŸ”§ æ–°å¢ï¼šå¼•å…¥ Chart.js å‡½å¼åº« -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ğŸ”§ æ–°å¢ï¼šå¼•å…¥ Chart.js æ•¸æ“šæ¨™ç±¤å¤–æ› -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <script>
      // ğŸ”§ æ–°å¢ï¼šå„€è¡¨æ¿æ ¸å¿ƒé‚è¼¯
      // 1. å„²å­˜åŸå§‹æ•¸æ“šå’Œåœ–è¡¨å¯¦ä¾‹
      let allNewsData = {{ results | tojson }};
      // ç‚ºæ¯æ¢æ–°èå¢åŠ ä¸€å€‹å”¯ä¸€ ID å’Œä¸€å€‹ isExcluded ç‹€æ…‹
      allNewsData.forEach((item, index) => {
        item.uniqueId = index;
        item.isExcluded = false;
      });

      let filters = { source: null, sentiment: null, date: null };
      let pieChart, sentimentBarChart, trendLineChart; // å°‡åœ–è¡¨å¯¦ä¾‹è¨­ç‚ºå…¨åŸŸè®Šæ•¸

      // 2. çµ±ä¸€çš„å„€è¡¨æ¿æ›´æ–°å‡½å¼
      function updateDashboard() {
        // é¦–å…ˆæ’é™¤è¢«æ‰‹å‹•æ¨™è¨˜çš„æ•¸æ“šï¼Œç„¶å¾Œå†æ ¹æ“šåœ–è¡¨ç¯©é¸å™¨ç¯©é¸
        let activeData = allNewsData.filter(item => !item.isExcluded);
        let filteredData = activeData.filter(item => {
          const sourceMatch = !filters.source || item['ä¾†æº'] === filters.source;
          const sentimentMatch = !filters.sentiment || item['æƒ…æ„Ÿåˆ†é¡'] === filters.sentiment;
          const dateMatch = !filters.date || item['ç™¼å¸ƒæ™‚é–“'].startsWith(filters.date);
          return sourceMatch && sentimentMatch && dateMatch;
        });

        // æ›´æ–°ç¸½ç­†æ•¸
        document.querySelector('.stats-badge').textContent = filteredData.length;

        // æ›´æ–°æ–°èåˆ—è¡¨
        const tbody = document.querySelector('tbody');
        // æˆ‘å€‘ä¸å†é‡æ–°ç”Ÿæˆåˆ—è¡¨ï¼Œè€Œæ˜¯æ ¹æ“šç¯©é¸çµæœé¡¯ç¤ºæˆ–éš±è—è¡Œ
        document.querySelectorAll('tbody tr').forEach(row => {
          const rowId = parseInt(row.dataset.id, 10);
          const rowIsVisible = filteredData.some(d => d.uniqueId === rowId);
          row.style.display = rowIsVisible ? '' : 'none';
        });

        // æ›´æ–°åœ“é¤…åœ–
        if (pieChart) {
          // æ³¨æ„ï¼šåœ–è¡¨æ•¸æ“šä¾†è‡ª activeDataï¼Œä¸å—åœ–è¡¨ç¯©é¸å™¨å½±éŸ¿ï¼Œåªå—æ‰‹å‹•æ’é™¤å½±éŸ¿
          const sourceCounts = activeData.reduce((acc, item) => {
            acc[item['ä¾†æº']] = (acc[item['ä¾†æº']] || 0) + 1;
            return acc;
          }, {});
          const sortedSources = Object.entries(sourceCounts).sort((a, b) => b[1] - a[1]);
          pieChart.data.labels = sortedSources.map(entry => entry[0]);
          pieChart.data.datasets[0].data = sortedSources.map(entry => entry[1]);
          pieChart.update();
        }

        // æ›´æ–°æƒ…æ„Ÿé•·æ¢åœ–
        if (sentimentBarChart) {
          const sentimentCounts = activeData.reduce((acc, item) => {
            acc[item['æƒ…æ„Ÿåˆ†é¡']] = (acc[item['æƒ…æ„Ÿåˆ†é¡']] || 0) + 1;
            return acc;
          }, {});
          sentimentBarChart.data.labels.forEach((label, index) => {
            sentimentBarChart.data.datasets[0].data[index] = sentimentCounts[label] || 0;
          });
          sentimentBarChart.update();
        }

        // æ›´æ–°æ™‚é–“è¶¨å‹¢åœ–
        if (trendLineChart) {
          const dateCounts = activeData.reduce((acc, item) => {
            const date = item['ç™¼å¸ƒæ™‚é–“'].split(' ')[0];
            acc[date] = (acc[date] || 0) + 1;
            return acc;
          }, {});
          trendLineChart.data.labels.forEach((label, index) => {
            trendLineChart.data.datasets[0].data[index] = dateCounts[label] || 0;
          });
          trendLineChart.update();
        }

        // æ ¹æ“šæ˜¯å¦æœ‰ç¯©é¸æ¢ä»¶ï¼Œé¡¯ç¤º/éš±è—é‡è¨­æŒ‰éˆ•
        const hasFilters = Object.values(filters).some(f => f !== null);
        document.getElementById('reset-filters-btn').style.display = hasFilters ? 'inline-block' : 'none';
      }

      // 3. é‡è¨­ç¯©é¸çš„é‚è¼¯
      document.getElementById('reset-filters-btn').addEventListener('click', () => {
        filters = { source: null, sentiment: null, date: null };
        // é‡è¨­ checkbox ç‹€æ…‹
        // document.querySelectorAll('.form-check-input').forEach(cb => cb.checked = true);
        updateDashboard();
      });

      // 4. é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
      document.addEventListener('DOMContentLoaded', () => {
        // ç‚ºæ‰€æœ‰æ’é™¤æŒ‰éˆ•ç¶å®šäº‹ä»¶
        document.querySelectorAll('.toggle-exclude').forEach(button => {
          button.addEventListener('click', function() {
            const row = this.closest('tr');
            const rowId = parseInt(row.dataset.id, 10);
            const newsItem = allNewsData.find(d => d.uniqueId === rowId);

            // åˆ‡æ›æ’é™¤ç‹€æ…‹
            newsItem.isExcluded = !newsItem.isExcluded;

            // æ›´æ–°è¦–è¦ºæ¨£å¼
            row.classList.toggle('excluded', newsItem.isExcluded);
            this.innerHTML = newsItem.isExcluded ? 'ğŸ”„' : 'ğŸ‘ï¸';

            // æ›´æ–°å„€è¡¨æ¿
            updateDashboard();
          });
        });
        // åˆå§‹ç¹ªè£½æ‰€æœ‰åœ–è¡¨
        drawSentimentChart();
        drawPieChart();
        drawTrendChart();
      });

      // èˆŠçš„ç¯©é¸é‚è¼¯ä¸å†éœ€è¦ï¼Œå› ç‚º updateDashboard æœƒè™•ç†åˆ—è¡¨æ›´æ–°
      /*
      // æ–°èä¾†æºç¯©é¸é‚è¼¯
      document.querySelectorAll(".form-check-input").forEach((checkbox) => {
        checkbox.addEventListener("change", function () {
          const selectedSources = Array.from(
            document.querySelectorAll(".form-check-input:checked")
          ).map((el) => el.value);
          document.querySelectorAll("tbody tr").forEach((row) => {
            const source = row.getAttribute("data-source");
            if (selectedSources.includes(source)) {
              row.style.display = "";
            } else {
              row.style.display = "none";
            }
          });
        });
      });
      */

      // ğŸ”§ æ–°å¢ï¼šå…¨åŸŸè¨»å†Š datalabels å¤–æ›
      Chart.register(ChartDataLabels);

      // ğŸ”§ ä¿®æ”¹ï¼šå°‡ç¹ªåœ–é‚è¼¯å°è£æˆå‡½å¼
      function drawSentimentChart() {
      {% if sentiment_chart_data %}
      const sentimentBarCtx = document.getElementById('sentimentBarChart').getContext('2d');
      const sentimentChartData = {{ sentiment_chart_data | tojson }};
      
      // å®šç¾©é¡è‰²æ˜ å°„
      const sentimentColors = {
        'æ­£é¢': 'rgba(46, 204, 113, 0.7)',
        'ä¸­ç«‹': 'rgba(243, 156, 18, 0.7)',
        'è² é¢': 'rgba(231, 76, 60, 0.7)',
        'æœªçŸ¥': 'rgba(149, 165, 166, 0.7)'
      };

      const sentimentBorderColors = {
        'æ­£é¢': 'rgb(46, 204, 113)',
        'ä¸­ç«‹': 'rgb(243, 156, 18)',
        'è² é¢': 'rgb(231, 76, 60)',
        'æœªçŸ¥': 'rgb(149, 165, 166)'
      };

      sentimentBarChart = new Chart(sentimentBarCtx, {
        type: 'bar',
        data: {
          labels: sentimentChartData.labels,
          datasets: [{
            label: 'æ–°èæ•¸é‡',
            data: sentimentChartData.data,
            backgroundColor: sentimentChartData.labels.map(label => sentimentColors[label]),
            borderColor: sentimentChartData.labels.map(label => sentimentBorderColors[label]),
            borderWidth: 1
          }]
        },
        options: {
          indexAxis: 'y', // è®“é•·æ¢åœ–è®Šç‚ºæ°´å¹³ï¼Œæ¨™ç±¤æ›´æ˜“è®€
          responsive: true,
          plugins: {
            // ğŸ”§ æ–°å¢ï¼šåœ¨æ­¤åœ–è¡¨ä¸­æ˜ç¢ºç¦ç”¨ datalabels
            datalabels: {
              display: false
            },
            legend: {
              display: false // åªæœ‰ä¸€å€‹æ•¸æ“šé›†ï¼Œä¸éœ€è¦åœ–ä¾‹
            }
          },
          onClick: (event, elements) => {
            if (elements.length > 0) {
              const clickedIndex = elements[0].index;
              filters.sentiment = sentimentBarChart.data.labels[clickedIndex];
              updateDashboard();
            }
          }
        }
      });
      {% endif %}
      }

      // ğŸ”§ ä¿®æ”¹ï¼šå°‡ç¹ªåœ–é‚è¼¯å°è£æˆå‡½å¼
      function drawPieChart() {
      {% if pie_chart_data %}
      const pieChartCtx = document.getElementById('pieChart').getContext('2d');
      const pieChartData = {{ pie_chart_data | tojson }};

      pieChart = new Chart(pieChartCtx, {
          type: 'pie',
          data: {
              labels: pieChartData.labels,
              datasets: [{
                  label: 'æ–°èç¯‡æ•¸',
                  data: pieChartData.data,
                  backgroundColor: [ // æä¾›ä¸€äº›é è¨­é¡è‰²
                      '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40',
                      '#E7E9ED', '#8DDF3C', '#3C8DDF', '#DF3C8D', '#DF8D3C', '#8D3CDF'
                  ],
                  hoverOffset: 4
              }]
          },
          options: {
              responsive: true,
              maintainAspectRatio: true,
              plugins: {
                  // ğŸ”§ æ–°å¢ï¼šè¨­å®š datalabels å¤–æ›
                  datalabels: {
                      formatter: (value, ctx) => {
                          // è¨ˆç®—ç¸½å’Œ
                          const sum = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                          // è¨ˆç®—ç™¾åˆ†æ¯”
                          const percentage = (value * 100 / sum).toFixed(1) + '%';
                          return percentage;
                      },
                      color: '#fff', // æ–‡å­—é¡è‰²
                      font: {
                          weight: 'bold',
                          size: 12,
                      },
                      // å¢åŠ æ–‡å­—é™°å½±ï¼Œè®“å®ƒåœ¨æ·ºè‰²èƒŒæ™¯ä¸Šæ›´æ¸…æ™°
                      textShadowBlur: 2,
                      textShadowColor: 'rgba(0, 0, 0, 0.5)'
                  },
                  legend: {
                      position: 'top',
                  },
                  tooltip: {
                      callbacks: {
                          label: function(context) {
                              let label = context.label || '';
                              if (label) {
                                  label += ': ';
                              }
                              if (context.parsed !== null) {
                                  label += context.parsed + ' ç¯‡';
                              }
                              return label;
                          }
                      }
                  }
              },
              // æ ¸å¿ƒï¼šé»æ“Šäº‹ä»¶è™•ç†
              onClick: (event, elements) => {
                  if (elements.length > 0) {
                      const clickedElementIndex = elements[0].index;
                      // æ›´æ–°ç¯©é¸æ¢ä»¶ä¸¦é‡ç¹ªå„€è¡¨æ¿
                      filters.source = pieChart.data.labels[clickedElementIndex];
                      updateDashboard();
                  }
              }
          }
      });
      {% endif %}
      }

      // ğŸ”§ ä¿®æ”¹ï¼šå°‡ç¹ªåœ–é‚è¼¯å°è£æˆå‡½å¼
      function drawTrendChart() {
      {% if trend_chart_data %}
      const trendLineCtx = document.getElementById('trendLineChart').getContext('2d');
      const trendChartData = {{ trend_chart_data | tojson }};
      
      trendLineChart = new Chart(trendLineCtx, {
        type: 'line',
        data: {
          labels: trendChartData.labels,
          datasets: [{
            label: 'æ–°èæ•¸é‡',
            data: trendChartData.data,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.1, // è®“ç·šæ¢æ›´å¹³æ»‘
            fill: false, // ä¸å¡«å……ç·šä¸‹å€åŸŸ
            pointRadius: 3, // é»çš„å¤§å°
            pointBackgroundColor: 'rgb(75, 192, 192)'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            datalabels: {
              display: false // ç·šåœ–é€šå¸¸ä¸é¡¯ç¤º datalabelsï¼Œé¿å…æ“æ“ 
            },
            legend: {
              display: false // åªæœ‰ä¸€å€‹æ•¸æ“šé›†ï¼Œä¸éœ€è¦åœ–ä¾‹
            }
          },
          scales: {
            x: { title: { display: true, text: 'æ—¥æœŸ' } },
            y: { 
              title: { display: true, text: 'æ–°èæ•¸é‡' }, 
              beginAtZero: true,
              // ğŸ”§ æ–°å¢ï¼šè¨­å®š Y è»¸åˆ»åº¦
              ticks: {
                stepSize: 1, // å¼·åˆ¶æ­¥é•·ç‚º 1
                precision: 0 // ä¸é¡¯ç¤ºå°æ•¸é»
              }
            }
          },
          onClick: (event, elements) => {
            if (elements.length > 0) {
              const clickedIndex = elements[0].index;
              filters.date = trendLineChart.data.labels[clickedIndex];
              updateDashboard();
            }
          }
        }
      });
      {% endif %}
      }
    </script>
  </body>
</html>
